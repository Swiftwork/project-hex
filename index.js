webpackJsonp([0],[function(e,t,n){"use strict";var i=n(1),s=n(2);if(!i.Engine.isSupported())throw document.querySelector("h1#support").style.display="block",document.querySelector("canvas#game").remove(),"Your browser does not support BabylonJS or WebGL is not enabled!";document.querySelector("h1#support").remove();var o=new s["default"](document.querySelector("canvas#game"));window.game=o,window.onfocus=o.onResume.bind(o),window.onresize=o.onResize.bind(o),window.onblur=o.onPause.bind(o)},,function(e,t,n){"use strict";var i=n(1),s=n(3),o=n(18),r=n(19),a=n(21),u=n(25),c=n(32),l=n(39),h=function(){function e(e){var t=this;this.canvas=e,this.settings={seed:new o["default"](1),difficulty:1,paused:!1,graphics:{quality:5},world:{layout:new r["default"](r["default"].LAYOUT_HORIZONTAL,new i.Vector2(.5,.5),i.Vector3.Zero()),size:16}},this.engine=new i.Engine(this.canvas,(!0)),this.engine.loadingScreen=new l["default"](this.canvas,new i.Color3(.4,.2,.3)),this.engine.displayLoadingUI(),this.scene=new i.Scene(this.engine),this.gui=new i.ScreenSpaceCanvas2D(this.scene,{id:"gui"}),this.assetsManager=new s["default"],this.assetsManager.loadAllAssets(new i.AssetsManager(this.scene),function(e){t.world=new a["default"](t),t.logic=new u["default"](t,t.world,t.scene),t.renderer=new c["default"](t,t.world,t.scene),t.onStart()})}return e.prototype.onStart=function(){this.logic.onCreate(),this.renderer.onCreate()},e.prototype.onResume=function(){this.settings.paused=!1,this.logic.onResume(),this.renderer.onResume()},e.prototype.onResize=function(){this.engine.resize()},e.prototype.onPause=function(){this.settings.paused=!0,this.logic.onPause(),this.renderer.onPause()},e.prototype.onQuit=function(){this.logic.onDestroy(),this.renderer.onDestroy()},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=h},function(e,t,n){"use strict";var i=function(){function e(){this.assets=new Map}return e.prototype.add=function(e,t){return this.assets.set(e,t),t},e.prototype.get=function(e){return this.assets.get(e)},e.prototype.loadAllAssets=function(e,t){var n=this,i=function(t){var i=s.textures[t],o=function(s){var o=i[s],r=e.addTextureTask(t+"-"+s,o);r.onSuccess=function(e){n.add("texture-"+t+"-"+s,e.texture)}};for(var r in i)o(r)};for(var o in s.textures)i(o);for(var o in s.models){var r=s.models[o].mesh,a=e.addMeshTask(o,"","",r);a.onSuccess=function(e){for(var t=0;t<e.loadedMeshes.length;++t){var i=e.loadedMeshes[t];i.setEnabled(!1),n.add("mesh-"+i.name,i)}}}e.onFinish=t,e.load()},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var s={textures:{paper:{diffuse:n(4),bump:n(5)},felt:{diffuse:n(6)},wood:{diffuse:n(7)},dirt:{diffuse:n(8)},grass:{diffuse:n(9)},ice:{diffuse:n(10)},sand:{diffuse:n(11)},snow:{diffuse:n(12)},stone:{diffuse:n(13)},water:{diffuse:n(14)}},models:{environment:{mesh:n(15)},structures:{mesh:n(16)},scout:{mesh:n(17)}}}},function(e,t,n){e.exports=n.p+"assets/1adf283ac9ae19afe70f836f25be7469.jpg"},function(e,t,n){e.exports=n.p+"assets/28bd68f5196f8978354abb3527f77cfc.jpg"},function(e,t,n){e.exports=n.p+"assets/028b9ecf31c0390301c1e28a95407321.jpg"},function(e,t,n){e.exports=n.p+"assets/d8e57d63f73a680116a175b4777acf64.jpg"},function(e,t,n){e.exports=n.p+"assets/dadb7e6ff1c8addc29f7a195e2cc3145.svg"},function(e,t,n){e.exports=n.p+"assets/80d81f9190bd3f6edb5befa7a0e243cb.svg"},function(e,t,n){e.exports=n.p+"assets/da9e7f8d875a34fc079f0ac8eae93434.svg"},function(e,t,n){e.exports=n.p+"assets/f725a4a6b6718d2fbd507467a3e45f42.svg"},function(e,t,n){e.exports=n.p+"assets/7e4520a81332408a42513d846047e478.svg"},function(e,t,n){e.exports=n.p+"assets/f8fc2596d46033257876cec1c335665a.svg"},function(e,t,n){e.exports=n.p+"assets/cab7a66528bd3aa14ca69fe851dfe583.svg"},function(e,t,n){e.exports=n.p+"assets/5a86b4e8ef18d191c8fb1698b0de07a4.babylon"},function(e,t,n){e.exports=n.p+"assets/715d74d42e8c9a171f7945d7da283a95.babylon"},function(e,t,n){e.exports=n.p+"assets/9e4551528ef0076e0cd8a831fc9b7148.babylon"},function(e,t){"use strict";var n=function(){function e(e){this.setSeed(e)}return e.prototype.random=function(){return(11*this.seed+17)%25/25},e.prototype.getSeed=function(){return this.seed},e.prototype.setSeed=function(e){this.seed=this.charsToInt(e)},e.prototype.charsToInt=function(e){Array.isArray(e)&&(e=e.join("")),"number"==typeof e&&(e=e.toString());for(var t=0,n=0;n<e.length;++n)t+=e.charCodeAt(n)||1;return t},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";var i=n(1),s=n(20),o=function(){function e(e,t,n,i,s,o,r,a,u){this.f0=e,this.f1=t,this.f2=n,this.f3=i,this.b0=s,this.b1=o,this.b2=r,this.b3=a,this.startAngle=u}return e}();t.HexagonOrientation=o;var r=function(){function e(e,t,n){this.orientation=e,this.size=t,this.origin=n}return e.prototype.hexagonToPixel=function(e,t){var n=(this.orientation.f0*e.q+this.orientation.f1*e.r)*this.size.x,s=(this.orientation.f2*e.q+this.orientation.f3*e.r)*this.size.y;return new i.Vector3(n+this.origin.x,t,s+this.origin.z)},e.prototype.pixelToHexagon=function(e){var t=new i.Vector2((e.x-this.origin.x)/this.size.x,(e.y-this.origin.y)/this.size.y),n=this.orientation.b0*t.x+this.orientation.b1*t.y,o=this.orientation.b2*t.x+this.orientation.b3*t.y;return new s["default"](n,o,-n-o)},e.prototype.cornerOffset=function(e,t){var n=2*Math.PI*(this.orientation.startAngle+e)/6;return new i.Vector3(this.size.x*Math.cos(n),this.size.y*Math.sin(n),t)},e.prototype.polygonCorners=function(e){for(var t=[],n=this.hexagonToPixel(e,0),s=0;s<7;s++){var o=this.cornerOffset(s,0);t.push(new i.Vector3(n.x+o.x,n.y+o.y,0))}return t},e.prototype.randomInside=function(t,n){if(!(Math.randomBetween(0,3*this.size.x*this.size.y)<<0))return new i.Vector3(0,0,0);var s=Math.randomBetween(0,2)<<0,o=e.RHOMBUSES[s],r=e.RHOMBUSES[(s+1)%3],a=.85*Math.randomBetween(0,this.size.x-1),u=.85*Math.randomBetween(0,this.size.y-1);return new i.Vector3(a*o.x+u*r.x,n,a*o.y+u*r.y)},e.LAYOUT_VERTICAL=new o(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,.5),e.LAYOUT_HORIZONTAL=new o(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0),e.RHOMBUSES=[new i.Vector2((-1),0),new i.Vector2(.5,Math.sqrt(3)/2),new i.Vector2(.5,-Math.sqrt(3)/2)],e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t){"use strict";var n=function(){function e(e,t,n){this.q=e,this.r=t,this.s=n,"undefined"==typeof n&&(this.s=n=-e-t),console.assert(e+t+n==0,"Coordinates (Q, R, S) must amount to 0")}return e.prototype.toString=function(){return"("+this.q+", "+this.r+", "+this.s+")"},e.prototype.hash=function(){var e=this.q>=0?2*this.q:-2*this.q-1,t=this.r>=0?2*this.r:-2*this.r-1,n=(e>=t?e*e+e+t:e+t*t)/2;return this.q<0&&this.r<0||this.q>=0&&this.r>=0?n:-n-1},e.prototype.equal=function(e){return this.q==e.q&&this.r==e.r&&this.s==e.s},e.prototype.add=function(t){return new e(this.q+t.q,this.r+t.r,this.s+t.s)},e.prototype.subtract=function(t){return new e(this.q-t.q,this.r-t.r,this.s-t.s)},e.prototype.multiply=function(t){return new e(this.q*t.q,this.r*t.r,this.s*t.s)},e.prototype.scale=function(t){return new e(this.q*t,this.r*t,this.s*t)},e.prototype.distance=function(e){var t=this.subtract(e);return(Math.abs(t.q)+Math.abs(t.r)+Math.abs(t.s))/2},e.prototype.neighbor=function(e){return this.add(t.hexagonDirections[(6+e%6)%6])},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,t.hexagonDirections=[new n(0,1,(-1)),new n(1,0,(-1)),new n(1,(-1),0),new n(0,(-1),1),new n((-1),0,1),new n((-1),1,0)]},function(e,t,n){"use strict";var i=n(1),s=n(20),o=n(22),r=n(23),a=function(){function e(e){this.game=e,this.tiles=new Map,this.game.settings.seed&&this.generate()}return e.prototype.generate=function(){return this.tiles.clear(),this.createTiles(this.game.settings.world.size),this},e.prototype.createTiles=function(e){for(var t=-e;t<=e;t++)for(var n=Math.max(-e,-t-e),i=Math.min(e,-t+e),r=n;r<=i;r++){var a=new s["default"](t,r,-t-r),u=a.hash(),c=new o["default"](a,this.generateTileType(u,[this.tiles.get(a.neighbor(3).hash()),this.tiles.get(a.neighbor(4).hash()),this.tiles.get(a.neighbor(5).hash())]));switch(c.type){case"mountain":c.surface=o["default"].SURFACES.MOUNTAIN;break;case"plain":break;case"desert":break;case"forest":this.createForest(c)}this.tiles.set(u,c)}},e.prototype.generateTileType=function(e,t){var n={};for(var i in o["default"].TYPES)n[o["default"].TYPES[i]]=1;for(var s=0;s<t.length;s++){var r=t[s];if("undefined"!=typeof r)switch(r.type){case"mountain":n[o["default"].TYPES.MOUNTAIN]<4?n[o["default"].TYPES.MOUNTAIN]=10:n[o["default"].TYPES.MOUNTAIN]-=6;break;case"plain":n[o["default"].TYPES.PLAIN]+=5;break;case"desert":n[o["default"].TYPES.DESERT]+=5;break;case"forest":n[o["default"].TYPES.FOREST]+=5;break;case"ocean":n[o["default"].TYPES.OCEAN]*=3;break;default:n[r.type]+=1}}var a=0;for(var i in n)a+=n[i];var u=Math.abs(this.game.settings.seed.random()*e*100%a)<<0;for(var i in n)if(u-=n[i],u<0)return i},e.prototype.createForest=function(t){t.biomeData.density=.2,t.biomeData.treeType=e.TREES.random(this.game.settings.seed.random()*t.hexagon.hash()*100);for(var n=this.game.settings.world.layout.hexagonToPixel(t.hexagon,0),s=[],o=0;o<500;++o){for(var a=n.add(this.game.settings.world.layout.randomInside(t.hexagon,0)),u=!1,c=0;c<s.length;++c)if(i.Vector3.Distance(s[c].position,a)<.2*(1-t.biomeData.density)){u=!0;break}if(!u){var l=new r["default"]("tree",t,""+t.biomeData.treeType);l.position=a,s.push(l)}}t.addEnvironment(s)},e.TREES=["oak-1","oak-2","oak-3","oak-4","cacti-1","cacti-2","pine-1","pine-2","pine-3","pine-4","pine-5","snow-pine-1","snow-pine-2","snow-pine-3","snow-pine-4","snow-pine-5"],e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t){"use strict";var n=function(){function e(t,n){if(this.hexagon=t,this.type=n,this.biomeData={},this.surface=e.SURFACES.PLAIN,this.isExplored=!1,this.isVisible=!1,this.environment=[],"undefined"==typeof n){var i=Object.keys(e.TYPES);this.type=e.TYPES[i[i.length*Math.random()<<0]]}}return e.prototype.addEnvironment=function(e){return this.environment=this.environment.concat(e),e},e.prototype.setStructure=function(e){return this.structure=e,e},e.prototype.setUnit=function(e){return this.unit=e,e},e.TYPES={ARCTIC:"arctic",BARREN:"barren",DESERT:"desert",FOREST:"forest",GLACIER:"glacier",MOUNTAIN:"mountain",OCEAN:"ocean",PLAIN:"plain"},e.SURFACES={PLAIN:"hex-plain",MOUNTAIN:"mountain-plain",GRASS:"grass-small",DUNES:"desert-dunes"},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=n(24),o=function(e){function t(t,n,i){e.call(this,t,n,i)}return i(t,e),t}(s["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=n(1),s=function(){function e(e,t,n){this.id=e,this.tile=t,this.model=n,this.position=new i.Vector3(0,0,0)}return e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=n(20),s=n(26),o=n(31),r=function(){function e(e,t,n){this.game=e,this.world=t,this.scene=n,this.scene.collisionsEnabled=!1,this.playerManager=new o["default"](this.scene)}return e.prototype.onCreate=function(){var e=this.playerManager.add("TestMan",s["default"].TYPES.LOCAL),t=e.createBase(this.world.tiles.get(new i["default"](0,0,0).hash())),n=e.createBase(this.world.tiles.get(new i["default"](5,3,(-8)).hash())),o=e.createBase(this.world.tiles.get(new i["default"]((-5),(-6),11).hash()));t.tile.structure.position=this.game.settings.world.layout.hexagonToPixel(t.tile.hexagon,0),n.tile.structure.position=this.game.settings.world.layout.hexagonToPixel(n.tile.hexagon,0),o.tile.structure.position=this.game.settings.world.layout.hexagonToPixel(o.tile.hexagon,0);var r=e.createScout(this.world.tiles.get(new i["default"]((-3),5,(-2)).hash()));r.tile.unit.position=this.game.settings.world.layout.hexagonToPixel(r.tile.hexagon,0),this.onUpdate()},e.prototype.onResume=function(){this.onUpdate()},e.prototype.onUpdate=function(){this.updateVisiblity()},e.prototype.onPause=function(){},e.prototype.onDestroy=function(){},e.prototype.updateVisiblity=function(){var e=this.playerManager.getLocal(),t=e.structures.concat(e.units);this.world.tiles.forEach(function(e){e.isVisible=!1;for(var n=0;n<t.length;n++){var i=t[n],s=e.hexagon.distance(i.tile.hexagon);if(s<=3&&(e.isExplored=!0),s<=i.visibility)return void(e.isVisible=!0)}})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t,n){"use strict";var i=n(27),s=n(29),o=function(){function e(e,t){this.name=e,this.type=t,this.structures=[],this.units=[]}return e.prototype.createBase=function(e){var t=new i["default"]("base-"+this.structures.length,e,"viking-village-1");return e.setStructure(t),this.structures.push(t),t},e.prototype.createScout=function(e){var t=new s["default"]("scout-"+this.units.length,e,"scout");return e.setUnit(t),this.units.push(t),t},e.TYPES={LOCAL:0,REMOTE:1,NPC:2},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=n(28),o=function(e){function t(t,n,i){e.call(this,t,n,i),this.id=t,this.tile=n,this.model=i,this.stage=0}return i(t,e),t}(s["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=n(24),o=function(e){function t(t,n,i){e.call(this,t,n,i),this.id=t,this.tile=n,this.model=i,this.stages={1:3,2:4,3:5},this.visibility=2}return i(t,e),t}(s["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=n(30),o=function(e){function t(t,n,i){e.call(this,t,n,i),this.id=t,this.tile=n,this.model=i}return i(t,e),t}(s["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=n(24),o=function(e){function t(t,n,i){e.call(this,t,n,i),this.id=t,this.tile=n,this.model=i,this.visibility=1}return i(t,e),t}(s["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=n(26),s=function(){function e(e){this.scene=e,this.players=new Map,this.teams=new Map}return e.prototype.add=function(e,t,n){var s=new i["default"](e,t);return s.type===i["default"].TYPES.LOCAL&&(this.localPlayer=s),this.players.set(e,s),n&&this.teams.get(n)?this.teams.get(n).push(s):n&&this.teams.set(n,[s]),s},e.prototype.get=function(e){return this.players.get(e)},e.prototype.getLocal=function(){return this.localPlayer},e.prototype.getTeams=function(e){return this.teams.get(e)},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=n(1),s=n(33),o=n(34),r=n(36),a=n(37),u=n(38),c=function(){function e(e,t,n){var s=this;this.game=e,this.world=t,this.scene=n,this.scene.clearColor=new i.Color3(.9,.87,.85),this.scene.fogColor=this.scene.clearColor,this.scene.fogStart=10,this.scene.fogEnd=15,this.guiManager=new o["default"](this.game.gui),this.cameraManager=new r["default"](this.scene),this.lightManager=new a["default"](this.scene),this.materialManager=new u["default"](this.scene,this.game.assetsManager),this.mainCamera=this.cameraManager.get("main"),this.mainCamera.setTarget(i.Vector3.Zero()),this.mainCamera.attachControl(this.game.canvas,!1,!1),this.sunLight=this.lightManager.get("sunLight"),this.meshes=[],this.scene.actionManager=new i.ActionManager(this.scene),this.scene.actionManager.registerAction(new i.ExecuteCodeAction(i.ActionManager.OnKeyDownTrigger,function(e){192===e.sourceEvent.keyCode&&(s.scene.debugLayer.isVisible()?s.scene.debugLayer.hide():s.scene.debugLayer.show())}))}return e.prototype.onCreate=function(){this.renderTable(),this.renderTiles(),this.scene.createOrUpdateSelectionOctree();var e=new i.ShadowGenerator(8192,this.sunLight);e.bias=5e-7,e.usePoissonSampling=!0,e.getShadowMap().refreshRate=0,e.getShadowMap().renderList=e.getShadowMap().renderList.concat(this.meshes),this.game.engine.runRenderLoop(this.onUpdate.bind(this))},e.prototype.onResume=function(){this.game.engine.runRenderLoop(this.onUpdate.bind(this))},e.prototype.onUpdate=function(){this.scene.render(),this.mainCamera.panningSensibility=this.mainCamera.upperRadiusLimit*(this.mainCamera.upperRadiusLimit/this.mainCamera.radius)},e.prototype.onPause=function(){this.game.engine.stopRenderLoop()},e.prototype.onDestroy=function(){},e.prototype.renderTable=function(){var e=i.Mesh.CreateGround("table",2*this.game.settings.world.size,2*this.game.settings.world.size,2,this.scene);e.material=this.materialManager.get("felt"),e.receiveShadows=!0;var t=s["default"].CreateFrame("table-frame",{length:2*this.game.settings.world.size,depth:2*this.game.settings.world.size,height:.6,thickness:2,alignment:s["default"].ALIGNMENT.OUTSIDE},this.scene);t.material=this.materialManager.get("wood"),this.meshes.push(t)},e.prototype.renderTiles=function(){var e=this,t={};t.unexplored={base:this.game.assetsManager.get("mesh-hex-bottom").clone("tile-unexplored-base"),surface:this.game.assetsManager.get("mesh-hex-plain").clone("tile-unexplored-surface")},t.unexplored.base.setEnabled(!1),t.unexplored.surface.setEnabled(!1),t.unexplored.base.visibility=t.unexplored.surface.visibility=.4,t.unexplored.base.material=t.unexplored.surface.material=this.materialManager.get("unexplored"),this.world.tiles.forEach(function(n){var s,o,r="tile-"+n.hexagon.toString();n.isExplored&&(t[n.type]?(s=t[n.type].base.clone(r+"-base"),o=t[n.type].surface.clone(r+"-surface")):(s=e.game.assetsManager.get("mesh-hex-bottom").clone(r+"-base"),o=e.game.assetsManager.get("mesh-"+n.surface).clone(r+"-surface"),s.material=o.material=e.materialManager.get(n.type),s.receiveShadows=o.receiveShadows=!0,t[n.type]={base:s,surface:o}),e.renderEnvironment(n),n.isVisible?(e.renderStructure(n),e.renderUnit(n)):(e.sunLight.excludedMeshes.push(s),e.sunLight.excludedMeshes.push(o)),s.position=e.game.settings.world.layout.hexagonToPixel(n.hexagon,0),o.position=s.position.clone(),o.position.y=.093,s.rotation=o.rotation=new i.Vector3(0,Math.PI/2,0),s.scaling=o.scaling=new i.Vector3(.93,.93,.93),e.meshes.push(o))},this)},e.prototype.renderEnvironment=function(e){for(var t,n,i,s={},o=0;o<e.environment.length;++o){var r=e.environment[o],a="tile-"+e.hexagon.toString()+"-"+r.id+"-"+o;s[r.model]?i=s[r.model].createInstance(a):(t=this.game.assetsManager.get("mesh-"+r.model),i=t.clone(a),i.makeGeometryUnique(),i.subMeshes=t.subMeshes,n=i.getBoundingInfo().boundingBox,e.isVisible||this.sunLight.excludedMeshes.push(i),s[r.model]=i),i.position=r.position,i.position.y=.1,this.meshes.push(i)}},e.prototype.renderStructure=function(e){if(e.structure){var t=this.game.assetsManager.get("mesh-"+e.structure.model),n=(t.getBoundingInfo().boundingBox,t.createInstance("tile-"+e.hexagon.toString()+"-"+e.structure.id));n.scaling=new i.Vector3(.9,.9,.9),n.rotation=new i.Vector3(0,r["default"].toRadians(125),0),n.position=e.structure.position,n.position.y=.1,this.meshes.push(n)}},e.prototype.renderUnit=function(e){if(e.unit){var t=this.game.assetsManager.get("mesh-"+e.unit.model),n=(t.getBoundingInfo().boundingBox,t.createInstance("tile-"+e.hexagon.toString()+"-"+e.unit.id));n.scaling=new i.Vector3(.9,.9,.9),n.rotation=new i.Vector3(0,r["default"].toRadians(125),0),n.position=e.unit.position,n.position.y=.1,this.meshes.push(n)}},e.prototype.renderInterface=function(){},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=c},function(e,t,n){"use strict";var i=n(1),s=function(){function e(){}return e.CreateFrame=function(t,n,s){var o=i.Mesh.CreateBox("outer",n.length,s,!1),r=i.Mesh.CreateBox("inner",n.length,s,!1);switch(o.scaling=new i.Vector3(1,1,n.length/n.depth),r.scaling=new i.Vector3(1,1,n.length/n.depth),n.alignment){case e.ALIGNMENT.OUTSIDE:o.scaling.scaleInPlace(1+n.thickness/n.length*2);break;case e.ALIGNMENT.CENTER:o.scaling.scaleInPlace(1+n.thickness/n.length),r.scaling.scaleInPlace(1-n.thickness/n.length);break;case e.ALIGNMENT.INSIDE:default:r.scaling.scaleInPlace(1-n.thickness/n.length*2)}o.scaling.y=r.scaling.y=n.height/n.length;var a=i.CSG.FromMesh(o).subtract(i.CSG.FromMesh(r)).toMesh(t,null,s,!1);return o.dispose(),r.dispose(),a},e.CreateFrame3=function(t,n,s){var o=n.shape.slice(0),r=n.shape.slice(0);switch(n.alignment){case e.ALIGNMENT.OUTSIDE:for(var a=0;a<r.length;a++)r[a]=e.VectorExpand(r[a],n.thickness);break;case e.ALIGNMENT.CENTER:for(var a=0;a<r.length;a++)r[a]=e.VectorExpand(r[a],n.thickness/2);for(var a=0;a<o.length;a++)o[a]=e.VectorContract(o[a],n.thickness/2);break;case e.ALIGNMENT.INSIDE:default:for(var a=0;a<o.length;a++)o[a]=e.VectorContract(o[a],n.thickness)}var u=[i.Vector3.Zero(),new i.Vector3(0,n.height,0)],c=i.Mesh.ExtrudeShape("outer",r,u,1,0,3,s),l=i.Mesh.ExtrudeShape("inner",o,u,1,0,3,s),h=i.CSG.FromMesh(l).subtract(i.CSG.FromMesh(c)).toMesh(t,null,s,!1);return c.dispose(),l.dispose(),h},e.VectorExpand=function(e,t){return new i.Vector3(0===e.x?e.x:e.x>0?e.x+t:e.x-t,0===e.y?e.y:e.y>0?e.y+t:e.y-t,0===e.z?e.z:e.z>0?e.z+t:e.z-t)},e.VectorContract=function(e,t){return new i.Vector3(0===e.x?e.x:e.x>0?e.x-t:e.x+t,0===e.y?e.y:e.y>0?e.y-t:e.y+t,0===e.z?e.z:e.z>0?e.z-t:e.z+t)},e.ALIGNMENT={INSIDE:0,CENTER:1,OUTSIDE:2},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=n(35),s=function(){function e(e){this.gui=e,this.views=new Map}return e.prototype.add=function(e,t){var n=new i["default"](e,t);return n},e.prototype.get=function(e){return this.views.get(e)},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t){"use strict";var n=function(){function e(e,t){this.id=e,this.position=t}return e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";var i=n(1),s=function(){function e(t){this.scene=t,this.cameras=new Map,this.add("main",e.CAMERA.ARC_ROTATE,{alpha:e.toRadians(360),beta:e.toRadians(40),radius:5,position:i.Vector3.Zero(),settings:{lowerRadiusLimit:2,upperRadiusLimit:50,lowerBetaLimit:e.toRadians(30),upperBetaLimit:e.toRadians(75),panningAxis:new i.Vector3(1,0,1),inertia:.7}})}return e.prototype.add=function(t,n,s){var o;switch(n){case e.CAMERA.ARC_ROTATE:o=new i.ArcRotateCamera(t,s.alpha,s.beta,s.radius,s.position,this.scene);break;case e.CAMERA.UNIVERSAL:}for(var r in s.settings)s.settings.hasOwnProperty(r)&&(o[r]=s.settings[r]);return this.cameras.set(t,o),o},e.prototype.get=function(e){return this.cameras.get(e)},e.toRadians=function(e){return e*Math.PI/180},e.toDegrees=function(e){return 180*e/Math.PI},e.CAMERA={UNIVERSAL:1,ARC_ROTATE:2,FREE:3,FOLLOW:4,TOUCH:5,GAMEPAD:6,DEVICE_ORIENTATION:7,VIRTUAL_JOYSTICK:8,ANAGLYPH:9,VR_DEVICE_ORIENTATION:10,WEB_VR_FREE:11},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=n(1),s=function(){function e(t){this.scene=t,this.lights=new Map,this.add("sunLight",e.LIGHT.DIRECTIONAL,new i.Vector3((-2),(-8),4),null,{intensity:.7}),this.add("ambientLight",e.LIGHT.HEMISPHERIC,new i.Vector3(0,1,0),null,{intensity:.6,diffuse:new i.Color3(1,1,1),specular:new i.Color3(1,1,1),groundColor:new i.Color3(0,0,0)})}return e.prototype.add=function(t,n,s,o,r){var a;switch(n){case e.LIGHT.DIRECTIONAL:a=new i.DirectionalLight(t,s,this.scene);break;case e.LIGHT.SPOT:a=new i.SpotLight(t,s,o,.8,2,this.scene);break;case e.LIGHT.HEMISPHERIC:a=new i.HemisphericLight(t,s,this.scene)}o&&(a.position=o);for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u]);return this.lights.set(t,a),a},e.prototype.get=function(e){return this.lights.get(e)},e.LIGHT={POINT:1,DIRECTIONAL:2,SPOT:3,HEMISPHERIC:4},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=n(1),s=function(){function e(e,t){this.scene=e,this.assetsManager=t,this.materials=new Map;var n=this.add("felt","felt",[-30,-30]);n.diffuseColor=new i.Color3(.04,.28,.42);var s=this.add("wood","wood",[-50,-50]);s.specularColor=new i.Color3(.5,.5,.5),s.specularPower=100;var o=this.add("unexplored","");o.diffuseColor=new i.Color3(1,1,1);var r=(this.add("arctic","snow",[-1,-1]),this.add("barren","dirt",[-1,-1]),this.add("desert","sand",[-1,-1]),this.add("forest","grass",[-1,-1]));r.diffuseColor=new i.Color3(.5,.5,.5);var a=this.add("glacier","ice",[-1,-1]);a.specularColor=new i.Color3(.5,.5,.5),a.specularPower=100,a.alpha=.9;var u=(this.add("mountain","stone",[-1,-1]),this.add("ocean","water",[-1,-1]));u.specularColor=new i.Color3(.3,.3,.3),u.specularPower=100,u.alpha=.9;this.add("plain","grass",[-1,-1])}return e.prototype.add=function(e,t,n,s){var o=new i.StandardMaterial(e,this.scene);return o.diffuseTexture=this.assetsManager.get("texture-"+t+"-diffuse"),o.diffuseTexture&&("undefined"!=typeof n&&(o.diffuseTexture.uScale=n[0],o.diffuseTexture.vScale=n[1]),"undefined"!=typeof s&&(o.diffuseTexture.uOffset=s[0],o.diffuseTexture.vOffset=s[1])),o.bumpTexture=this.assetsManager.get("texture-"+t+"-bump"),o.bumpTexture&&("undefined"!=typeof n&&(o.bumpTexture.uScale=n[0],o.bumpTexture.vScale=n[1]),"undefined"!=typeof s&&(o.bumpTexture.uOffset=s[0],o.bumpTexture.vOffset=s[1])),o.specularColor=new i.Color3(0,0,0),o.specularPower=0,this.materials.set(e,o),o},e.prototype.get=function(e){return this.materials.get(e)},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=n(1),s=n(40),o=function(){function e(e,t){var n=this;this.renderingCanvas=e,this.backgroundColor=t,this.resizeToCanvas=function(){var e=n.renderingCanvas.getBoundingClientRect();n.loadingScreen.style.left=e.left+"px",n.loadingScreen.style.top=e.top+"px",n.loadingScreen.style.width=e.width+"px",n.loadingScreen.style.height=e.height+"px"}}return e.prototype.displayLoadingUI=function(){var e=this;this.loadingScreen||(this.template=s({text:this.loadingText||"Loading all the gooey goodness...",backgroundColor:this.backgroundColor.toHexString(),textColor:.33*this.backgroundColor.r+.5*this.backgroundColor.g+.16*this.backgroundColor.b>=.5?"black":"white"}),this.loadingScreen=document.createElement("div"),this.loadingScreen.id="loading-screen",this.loadingScreen.innerHTML=this.template,this.resizeToCanvas(),window.addEventListener("resize",this.resizeToCanvas),document.body.appendChild(this.loadingScreen),setTimeout(function(){e.loadingScreen.style.opacity="1"},0))},e.prototype.hideLoadingUI=function(){var e=this;if(this.loadingScreen){var t=function(){e.loadingScreen&&(document.body.removeChild(e.loadingScreen),window.removeEventListener("resize",e.resizeToCanvas),e.loadingScreen=null)};this.loadingScreen.style.opacity="0",this.loadingScreen.addEventListener("transitionend",t)}},Object.defineProperty(e.prototype,"loadingUIText",{set:function(e){this.loadingText=e,document.querySelector(".loading figcaption").innerHTML=this.loadingText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadingUIBackgroundColor",{get:function(){return this.backgroundColor.toHexString()},set:function(e){this.backgroundColor=i.Color3.FromHexString(e)},enumerable:!0,configurable:!0}),e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){function i(e){var t,i="",o=e||{};return function(e,o,r){i=i+"<style>#loading-screen {\n\tposition: absolute;\n\tcolor: "+s.escape(null==(t=r)?"":t)+";\n\tbackground-color: "+s.escape(null==(t=e)?"":t)+";\n\ttext-align: center;\n\topacity: 0;\n\ttransition: opacity 1.5s ease;\n}\nsvg polygon, svg path {\n\tfill: "+s.escape(null==(t=r)?"":t)+';\n}\n.loading {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin: 0;\n\ttransform: translate(-50%, -50%);\n}\n.loading svg {\n\twidth: 96px;\n}\n.loading figcaption {\n\tmargin-top: 2em;\n}\n.copy {\n\tposition: absolute;\n\tbottom: 0;\n\tpadding: 10%;\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n.copy svg {\n\theight: 1em;\n}\n.copy i {\n\tfont-style: normal;\n\tfont-size: 1.5em;\n}\n</style><figure class="loading"><div>'+(null==(t=n(43))?"":t)+"</div><figcaption>"+s.escape(null==(t=o)?"":t)+'</figcaption></figure><footer class="copy">Project-Hex is powered by BabylonJS <span>'+(null==(t=n(44))?"":t)+"</span> and built with <i>&hearts;</i></footer>"}.call(this,"backgroundColor"in o?o.backgroundColor:"undefined"!=typeof backgroundColor?backgroundColor:void 0,"text"in o?o.text:"undefined"!=typeof text?text:void 0,"textColor"in o?o.textColor:"undefined"!=typeof textColor?textColor:void 0),i}var s=n(41);e.exports=i},function(e,t,n){"use strict";function i(e,t){if(1===arguments.length){for(var n=e[0],s=1;s<e.length;s++)n=i(n,e[s]);return n}for(var o in t)if("class"===o){var r=e[o]||[];e[o]=(Array.isArray(r)?r:[r]).concat(t[o]||[])}else if("style"===o){var r=a(e[o]),u=a(t[o]);e[o]=r+(r&&u&&";")+u}else e[o]=t[o];return e}function s(e,t){for(var n,i="",s="",o=Array.isArray(t),a=0;a<e.length;a++)n=r(e[a]),n&&(o&&t[a]&&(n=l(n)),i=i+s+n,s=" ");return i}function o(e){var t="",n="";for(var i in e)i&&e[i]&&d.call(e,i)&&(t=t+n+i,n=" ");return t}function r(e,t){return Array.isArray(e)?s(e,t):e&&"object"==typeof e?o(e):e||""}function a(e){if(!e)return"";if("object"==typeof e){var t="",n="";for(var i in e)d.call(e,i)&&(t=t+n+i+":"+e[i],n=";");return t}return e=""+e,";"===e[e.length-1]?e.slice(0,-1):e}function u(e,t,n,i){return t!==!1&&null!=t&&(t||"class"!==e&&"style"!==e)?t===!0?" "+(i?e:e+'="'+e+'"'):("function"==typeof t.toJSON&&(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||t.indexOf('"')===-1)?(n&&(t=l(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"):""}function c(e,t){var n="";for(var i in e)if(d.call(e,i)){var s=e[i];if("class"===i){s=r(s),n=u(i,s,!1,t)+n;continue}"style"===i&&(s=a(s)),n+=u(i,s,!1,t)}return n}function l(e){var t=""+e,n=f.exec(t);if(!n)return e;var i,s,o,r="";for(i=n.index,s=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}s!==i&&(r+=t.substring(s,i)),s=i+1,r+=o}return s!==i?r+t.substring(s,i):r}function h(e,t,i,s){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||s))throw e.message+=" on line "+i,e;try{s=s||n(42).readFileSync(t,"utf8")}catch(o){h(e,null,i)}var r=3,a=s.split("\n"),u=Math.max(i-r,0),c=Math.min(a.length,i+r),r=a.slice(u,c).map(function(e,t){var n=t+u+1;return(n==i?"  > ":"    ")+n+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Pug")+":"+i+"\n"+r+"\n\n"+e.message,e}var d=Object.prototype.hasOwnProperty;t.merge=i,t.classes=r,t.style=a,t.attr=u,t.attrs=c;var f=/["&<>]/;t.escape=l,t.rethrow=h},function(e,t){},function(e,t){e.exports='<?xml version="1.0" encoding="utf-8"?>\n<svg id="SVG-Circus-328e0535-70be-f58b-9817-148f0bd26ef0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" \npreserveAspectRatio="xMidYMid meet">\n\t<style>\n\t\t@keyframes fade {\n\t\t  10% { opacity: 1; }\n\t\t  50% { opacity: 1; }\n\t\t  80% { opacity: 0; }\n\t\t}\n\t\tpolygon { opacity: 0; animation: fade 3000ms ease-in-out infinite }\n\t\t#actor_1 { animation-delay: 100ms }\n\t\t#actor_3 { animation-delay: 200ms }\n\t\t#actor_2 { animation-delay: 300ms }\n\t\t#actor_4 { animation-delay: 400ms }\n\t\t#actor_6 { animation-delay: 500ms }\n\t\t#actor_5 { animation-delay: 600ms }\n\t\t#actor_7 { animation-delay: 700ms }\n\t</style>\n\t<polygon id="actor_1" points="35.00,8.00 21.14,16.00 21.14,32.00 35.00,40.00 48.86,32.00 48.86,16.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_2" points="65.00,8.00 51.14,16.00 51.14,32.00 65.00,40.00 78.86,32.00 78.86,16.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_3" points="20.00,34.00 6.14,42.00 6.14,58.00 20.00,66.00 33.86,58.00 33.86,42.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_4" points="50.00,34.00 36.14,42.00 36.14,58.00 50.00,66.00 63.86,58.00 63.86,42.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_5" points="80.00,34.00 66.14,42.00 66.14,58.00 80.00,66.00 93.86,58.00 93.86,42.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_6" points="35.00,60.00 21.14,68.00 21.14,84.00 35.00,92.00 48.86,84.00 48.86,68.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_7" points="65.00,60.00 51.14,68.00 51.14,84.00 65.00,92.00 78.86,84.00 78.86,68.00" fill="rgba(255,255,255,1)"></polygon>\n</svg>';
},function(e,t){e.exports='<?xml version="1.0" encoding="utf-8"?>\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 44.347 44.347" style="enable-background:new 0 0 44.347 44.347;" xml:space="preserve">\n<path class="st0" d="M22.188,0C9.786-0.011,0.025,9.792,0,22.282c-0.025,12.382,9.553,22.035,21.893,22.065\n\tc12.51,0.031,22.412-9.678,22.454-22.018C44.389,10.056,34.421,0.011,22.188,0z M22.078,40.018\n\tc-9.787-0.064-17.738-8.033-17.749-17.786c-0.01-9.567,8.063-17.849,17.398-17.849c10.001,0,18.155,8.038,18.143,17.884\n\tC39.858,32.066,31.823,40.082,22.078,40.018z"/>\n<path class="st0" d="M21.196,6.083c-1.654,2.357-2.497,4.469-0.884,6.821c1.166,1.702,2.788,2.478,4.823,2.073\n\tc2.649-0.527,3.82-2.455,4.303-4.986c2.487,3.938,2.258,7.871-0.584,10.98c-2.739,2.995-6.799,3.766-10.547,2.003\n\tc-3.228-1.519-5.648-5.485-5.301-8.689C13.461,10.071,16.556,6.805,21.196,6.083z"/>\n</svg>\n'}]);