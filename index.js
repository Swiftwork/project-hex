webpackJsonp([0],[function(e,t,n){"use strict";var i=n(1),o=n(2);if(!i.Engine.isSupported())throw document.querySelector("h1#support").style.display="block",document.querySelector("canvas#game").remove(),"Your browser does not support BabylonJS or WebGL is not enabled!";document.querySelector("h1#support").remove();var s=new o["default"](document.querySelector("canvas#game"));window.game=s,window.onfocus=s.onResume.bind(s),window.onresize=s.onResize.bind(s),window.onblur=s.onPause.bind(s)},,function(e,t,n){"use strict";var i=n(1),o=n(3),s=n(18),r=n(19),a=n(21),u=n(25),c=n(32),l=n(36),h=function(){function e(e){var t=this;this.canvas=e,this.settings={seed:new s["default"](1),difficulty:1,paused:!1,graphics:{quality:5},world:{layout:new r["default"](r["default"].LAYOUT_HORIZONTAL,new i.Vector2(.5,.5),i.Vector3.Zero()),size:32}},this.engine=new i.Engine(this.canvas,(!0)),this.engine.loadingScreen=new l["default"](this.canvas,new i.Color3(.4,.2,.3)),this.engine.displayLoadingUI(),this.scene=new i.Scene(this.engine),this.assetsManager=new o["default"],this.assetsManager.loadAllAssets(new i.AssetsManager(this.scene),function(e){t.world=new a["default"](t),t.logic=new u["default"](t,t.world,t.scene),t.renderer=new c["default"](t,t.world,t.scene),t.onStart()})}return e.prototype.onStart=function(){this.logic.onCreate(),this.renderer.onCreate()},e.prototype.onResume=function(){this.settings.paused=!1,this.logic.onResume(),this.renderer.onResume()},e.prototype.onResize=function(){this.engine.resize()},e.prototype.onPause=function(){this.settings.paused=!0,this.logic.onPause(),this.renderer.onPause()},e.prototype.onQuit=function(){this.logic.onDestroy(),this.renderer.onDestroy()},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=h},function(e,t,n){"use strict";var i=function(){function e(){this.assets=new Map}return e.prototype.add=function(e,t){return this.assets.set(e,t),t},e.prototype.get=function(e){return this.assets.get(e)},e.prototype.loadAllAssets=function(e,t){var n=this,i=function(t){var i=o.textures[t],s=function(o){var s=i[o],r=e.addTextureTask(t+"-"+o,s);r.onSuccess=function(e){n.add("texture-"+t+"-"+o,e.texture)}};for(var r in i)s(r)};for(var s in o.textures)i(s);for(var s in o.models){var r=o.models[s].mesh,a=e.addMeshTask(s,"","",r);a.onSuccess=function(e){for(var t=0;t<e.loadedMeshes.length;++t){var i=e.loadedMeshes[t];i.setEnabled(!1),n.add("mesh-"+i.name,i)}}}e.onFinish=t,e.load()},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var o={textures:{paper:{diffuse:n(4),bump:n(5)},wood:{diffuse:n(6),bump:n(7)},dirt:{diffuse:n(8)},grass:{diffuse:n(9)},ice:{diffuse:n(10)},sand:{diffuse:n(11)},snow:{diffuse:n(12)},stone:{diffuse:n(13)},water:{diffuse:n(14)}},models:{environment:{mesh:n(15)},structures:{mesh:n(16)},scout:{mesh:n(17)}}}},function(e,t,n){e.exports=n.p+"assets/1adf283ac9ae19afe70f836f25be7469.jpg"},function(e,t,n){e.exports=n.p+"assets/28bd68f5196f8978354abb3527f77cfc.jpg"},function(e,t,n){e.exports=n.p+"assets/73e680508c59ccfc010445d7c7696648.jpg"},function(e,t,n){e.exports=n.p+"assets/be7d4f9af24236bf274b02b305073cd7.jpg"},function(e,t,n){e.exports=n.p+"assets/dadb7e6ff1c8addc29f7a195e2cc3145.svg"},function(e,t,n){e.exports=n.p+"assets/80d81f9190bd3f6edb5befa7a0e243cb.svg"},function(e,t,n){e.exports=n.p+"assets/da9e7f8d875a34fc079f0ac8eae93434.svg"},function(e,t,n){e.exports=n.p+"assets/f725a4a6b6718d2fbd507467a3e45f42.svg"},function(e,t,n){e.exports=n.p+"assets/7e4520a81332408a42513d846047e478.svg"},function(e,t,n){e.exports=n.p+"assets/f8fc2596d46033257876cec1c335665a.svg"},function(e,t,n){e.exports=n.p+"assets/cab7a66528bd3aa14ca69fe851dfe583.svg"},function(e,t,n){e.exports=n.p+"assets/7810b222f7371af2a66d6c42ec11fd3f.babylon"},function(e,t,n){e.exports=n.p+"assets/39f0551ff7a6e85a95431463928ba37f.babylon"},function(e,t,n){e.exports=n.p+"assets/9e4551528ef0076e0cd8a831fc9b7148.babylon"},function(e,t){"use strict";var n=function(){function e(e){this.setSeed(e)}return e.prototype.random=function(){return(11*this.seed+17)%25/25},e.prototype.getSeed=function(){return this.seed},e.prototype.setSeed=function(e){this.seed=this.charsToInt(e)},e.prototype.charsToInt=function(e){Array.isArray(e)&&(e=e.join("")),"number"==typeof e&&(e=e.toString());for(var t=0,n=0;n<e.length;++n)t+=e.charCodeAt(n)||1;return t},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";var i=n(1),o=n(20),s=function(){function e(e,t,n,i,o,s,r,a,u){this.f0=e,this.f1=t,this.f2=n,this.f3=i,this.b0=o,this.b1=s,this.b2=r,this.b3=a,this.startAngle=u}return e}();t.HexagonOrientation=s;var r=function(){function e(e,t,n){this.orientation=e,this.size=t,this.origin=n}return e.prototype.hexagonToPixel=function(e,t){var n=(this.orientation.f0*e.q+this.orientation.f1*e.r)*this.size.x,o=(this.orientation.f2*e.q+this.orientation.f3*e.r)*this.size.y;return new i.Vector3(n+this.origin.x,t,o+this.origin.z)},e.prototype.pixelToHexagon=function(e){var t=new i.Vector2((e.x-this.origin.x)/this.size.x,(e.y-this.origin.y)/this.size.y),n=this.orientation.b0*t.x+this.orientation.b1*t.y,s=this.orientation.b2*t.x+this.orientation.b3*t.y;return new o["default"](n,s,-n-s)},e.prototype.cornerOffset=function(e,t){var n=2*Math.PI*(this.orientation.startAngle+e)/6;return new i.Vector3(this.size.x*Math.cos(n),this.size.y*Math.sin(n),t)},e.prototype.polygonCorners=function(e){for(var t=[],n=this.hexagonToPixel(e,0),o=0;o<7;o++){var s=this.cornerOffset(o,0);t.push(new i.Vector3(n.x+s.x,n.y+s.y,0))}return t},e.prototype.randomInside=function(t,n){if(!(Math.randomBetween(0,3*this.size.x*this.size.y)<<0))return new i.Vector3(0,0,0);var o=Math.randomBetween(0,2)<<0,s=e.RHOMBUSES[o],r=e.RHOMBUSES[(o+1)%3],a=.85*Math.randomBetween(0,this.size.x-1),u=.85*Math.randomBetween(0,this.size.y-1);return new i.Vector3(a*s.x+u*r.x,n,a*s.y+u*r.y)},e.LAYOUT_VERTICAL=new s(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,.5),e.LAYOUT_HORIZONTAL=new s(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0),e.RHOMBUSES=[new i.Vector2((-1),0),new i.Vector2(.5,Math.sqrt(3)/2),new i.Vector2(.5,-Math.sqrt(3)/2)],e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t){"use strict";var n=function(){function e(e,t,n){this.q=e,this.r=t,this.s=n,"undefined"==typeof n&&(this.s=n=-e-t),console.assert(e+t+n==0,"Coordinates (Q, R, S) must amount to 0")}return e.prototype.toString=function(){return"("+this.q+", "+this.r+", "+this.s+")"},e.prototype.hash=function(){var e=this.q>=0?2*this.q:-2*this.q-1,t=this.r>=0?2*this.r:-2*this.r-1,n=(e>=t?e*e+e+t:e+t*t)/2;return this.q<0&&this.r<0||this.q>=0&&this.r>=0?n:-n-1},e.prototype.equal=function(e){return this.q==e.q&&this.r==e.r&&this.s==e.s},e.prototype.add=function(t){return new e(this.q+t.q,this.r+t.r,this.s+t.s)},e.prototype.subtract=function(t){return new e(this.q-t.q,this.r-t.r,this.s-t.s)},e.prototype.multiply=function(t){return new e(this.q*t.q,this.r*t.r,this.s*t.s)},e.prototype.scale=function(t){return new e(this.q*t,this.r*t,this.s*t)},e.prototype.distance=function(e){var t=this.subtract(e);return(Math.abs(t.q)+Math.abs(t.r)+Math.abs(t.s))/2},e.prototype.neighbor=function(e){return this.add(t.hexagonDirections[(6+e%6)%6])},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,t.hexagonDirections=[new n(0,1,(-1)),new n(1,0,(-1)),new n(1,(-1),0),new n(0,(-1),1),new n((-1),0,1),new n((-1),1,0)]},function(e,t,n){"use strict";var i=n(1),o=n(20),s=n(22),r=n(23),a=function(){function e(e){this.game=e,this.tiles=new Map,this.game.settings.seed&&this.generate()}return e.prototype.generate=function(){return this.tiles.clear(),this.createTiles(this.game.settings.world.size),this},e.prototype.createTiles=function(e){for(var t=-e;t<=e;t++)for(var n=Math.max(-e,-t-e),i=Math.min(e,-t+e),r=n;r<=i;r++){var a=new o["default"](t,r,-t-r),u=a.hash(),c=new s["default"](a,this.generateTileType(u,[this.tiles.get(a.neighbor(3).hash()),this.tiles.get(a.neighbor(4).hash()),this.tiles.get(a.neighbor(5).hash())]));switch(c.type){case"mountain":c.surface=s["default"].SURFACES.MOUNTAIN;break;case"plain":break;case"desert":break;case"forest":this.createForest(c)}this.tiles.set(u,c)}},e.prototype.generateTileType=function(e,t){var n={};for(var i in s["default"].TYPES)n[s["default"].TYPES[i]]=1;for(var o=0;o<t.length;o++){var r=t[o];if("undefined"!=typeof r)switch(r.type){case"mountain":n[s["default"].TYPES.MOUNTAIN]<4?n[s["default"].TYPES.MOUNTAIN]=10:n[s["default"].TYPES.MOUNTAIN]-=6;break;case"plain":n[s["default"].TYPES.PLAIN]+=5;break;case"desert":n[s["default"].TYPES.DESERT]+=5;break;case"forest":n[s["default"].TYPES.FOREST]+=5;break;case"ocean":n[s["default"].TYPES.OCEAN]*=3;break;default:n[r.type]+=1}}var a=0;for(var i in n)a+=n[i];var u=Math.abs(this.game.settings.seed.random()*e*100%a)<<0;for(var i in n)if(u-=n[i],u<0)return i},e.prototype.createForest=function(t){t.biomeData.density=.2,t.biomeData.treeType=e.TREES.random(this.game.settings.seed.random()*t.hexagon.hash()*100);for(var n=this.game.settings.world.layout.hexagonToPixel(t.hexagon,0),o=[],s=0;s<500;++s){for(var a=n.add(this.game.settings.world.layout.randomInside(t.hexagon,0)),u=!1,c=0;c<o.length;++c)if(i.Vector3.Distance(o[c].position,a)<.2*(1-t.biomeData.density)){u=!0;break}if(!u){var l=new r["default"]("tree",t,""+t.biomeData.treeType);l.position=a,o.push(l)}}t.addEnvironment(o)},e.TREES=["oak-1","oak-2","oak-3","oak-4","cacti-1","cacti-2","pine-1","pine-2","pine-3","pine-4","pine-5","snow-pine-1","snow-pine-2","snow-pine-3","snow-pine-4","snow-pine-5"],e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t){"use strict";var n=function(){function e(t,n){if(this.hexagon=t,this.type=n,this.biomeData={},this.surface=e.SURFACES.PLAIN,this.isExplored=!1,this.isVisible=!1,this.environment=[],"undefined"==typeof n){var i=Object.keys(e.TYPES);this.type=e.TYPES[i[i.length*Math.random()<<0]]}}return e.prototype.addEnvironment=function(e){return this.environment=this.environment.concat(e),e},e.prototype.setStructure=function(e){return this.structure=e,e},e.prototype.setUnit=function(e){return this.unit=e,e},e.TYPES={ARCTIC:"arctic",BARREN:"barren",DESERT:"desert",FOREST:"forest",GLACIER:"glacier",MOUNTAIN:"mountain",OCEAN:"ocean",PLAIN:"plain"},e.SURFACES={PLAIN:"hex-plain",MOUNTAIN:"mountain-plain",GRASS:"grass-small",DUNES:"desert-dunes"},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(24),s=function(e){function t(t,n,i){e.call(this,t,n,i)}return i(t,e),t}(o["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=n(1),o=function(){function e(e,t,n){this.id=e,this.tile=t,this.model=n,this.position=new i.Vector3(0,0,0)}return e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=n(20),o=n(26),s=n(31),r=function(){function e(e,t,n){this.game=e,this.world=t,this.scene=n,this.scene.collisionsEnabled=!1,this.playerManager=new s["default"](this.scene)}return e.prototype.onCreate=function(){var e=this.playerManager.add("TestMan",o["default"].TYPES.LOCAL),t=e.createBase(this.world.tiles.get(new i["default"](0,0,0).hash())),n=e.createBase(this.world.tiles.get(new i["default"](5,3,(-8)).hash())),s=e.createBase(this.world.tiles.get(new i["default"]((-5),(-6),11).hash()));t.tile.structure.position=this.game.settings.world.layout.hexagonToPixel(t.tile.hexagon,0),n.tile.structure.position=this.game.settings.world.layout.hexagonToPixel(n.tile.hexagon,0),s.tile.structure.position=this.game.settings.world.layout.hexagonToPixel(s.tile.hexagon,0);var r=e.createScout(this.world.tiles.get(new i["default"]((-3),5,(-2)).hash()));r.tile.unit.position=this.game.settings.world.layout.hexagonToPixel(r.tile.hexagon,0),this.onUpdate()},e.prototype.onResume=function(){this.onUpdate()},e.prototype.onUpdate=function(){this.updateVisiblity()},e.prototype.onPause=function(){},e.prototype.onDestroy=function(){},e.prototype.updateVisiblity=function(){var e=this.playerManager.getLocal(),t=e.structures.concat(e.units);this.world.tiles.forEach(function(e){e.isVisible=!1;for(var n=0;n<t.length;n++){var i=t[n],o=e.hexagon.distance(i.tile.hexagon);if(o<=4&&(e.isExplored=!0),o<=i.visibility)return void(e.isVisible=!0)}})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t,n){"use strict";var i=n(27),o=n(29),s=function(){function e(e,t){this.name=e,this.type=t,this.structures=[],this.units=[]}return e.prototype.createBase=function(e){var t=new i["default"]("base-"+this.structures.length,e,"viking-village-1");return e.setStructure(t),this.structures.push(t),t},e.prototype.createScout=function(e){var t=new o["default"]("scout-"+this.units.length,e,"scout");return e.setUnit(t),this.units.push(t),t},e.TYPES={LOCAL:0,REMOTE:1,NPC:2},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(28),s=function(e){function t(t,n,i){e.call(this,t,n,i),this.id=t,this.tile=n,this.model=i,this.stage=0}return i(t,e),t}(o["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(24),s=function(e){function t(t,n,i){e.call(this,t,n,i),this.id=t,this.tile=n,this.model=i,this.stages={1:3,2:4,3:5},this.visibility=2}return i(t,e),t}(o["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(30),s=function(e){function t(t,n,i){e.call(this,t,n,i),this.id=t,this.tile=n,this.model=i}return i(t,e),t}(o["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(24),s=function(e){function t(t,n,i){e.call(this,t,n,i),this.id=t,this.tile=n,this.model=i,this.visibility=1}return i(t,e),t}(o["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var i=n(26),o=function(){function e(e){this.scene=e,this.players=new Map,this.teams=new Map}return e.prototype.add=function(e,t,n){var o=new i["default"](e,t);return o.type===i["default"].TYPES.LOCAL&&(this.localPlayer=o),this.players.set(e,o),n&&this.teams.get(n)?this.teams.get(n).push(o):n&&this.teams.set(n,[o]),o},e.prototype.get=function(e){return this.players.get(e)},e.prototype.getLocal=function(){return this.localPlayer},e.prototype.getTeams=function(e){return this.teams.get(e)},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=n(1),o=n(33),s=n(34),r=n(35),a=function(){function e(e,t,n){var a=this;this.game=e,this.world=t,this.scene=n,this.scene.clearColor=new i.Color3(.9,.87,.85),this.scene.fogColor=this.scene.clearColor,this.scene.fogStart=10,this.scene.fogEnd=15,this.cameraManager=new o["default"](this.scene),this.lightManager=new s["default"](this.scene),this.materialManager=new r["default"](this.scene,this.game.assetsManager),this.mainCamera=this.cameraManager.get("main"),this.mainCamera.setTarget(i.Vector3.Zero()),this.mainCamera.attachControl(this.game.canvas,!1,!1),this.sunLight=this.lightManager.get("sunLight"),this.meshes=[],this.scene.actionManager=new i.ActionManager(this.scene),this.scene.actionManager.registerAction(new i.ExecuteCodeAction(i.ActionManager.OnKeyDownTrigger,function(e){192===e.sourceEvent.keyCode&&(a.scene.debugLayer.isVisible()?a.scene.debugLayer.hide():a.scene.debugLayer.show())}))}return e.prototype.onCreate=function(){this.createTable(),this.createTiles(),this.scene.createOrUpdateSelectionOctree();var e=new i.ShadowGenerator(8192,this.sunLight);e.bias=1e-4,e.getShadowMap().refreshRate=0,e.getShadowMap().renderList=e.getShadowMap().renderList.concat(this.meshes),this.game.engine.runRenderLoop(this.onUpdate.bind(this))},e.prototype.onResume=function(){this.game.engine.runRenderLoop(this.onUpdate.bind(this))},e.prototype.onUpdate=function(){this.scene.render(),this.mainCamera.panningSensibility=10*(this.mainCamera.upperRadiusLimit/this.mainCamera.radius)},e.prototype.onPause=function(){this.game.engine.stopRenderLoop()},e.prototype.onDestroy=function(){},e.prototype.createTable=function(){var e=i.Mesh.CreateGround("table",100,100,2,this.scene);e.material=this.materialManager.get("paper"),e.receiveShadows=!0},e.prototype.createTiles=function(){var e=this,t={};t.unexplored={base:this.game.assetsManager.get("mesh-hex-bottom").clone("tile-unexplored-base"),surface:this.game.assetsManager.get("mesh-hex-plain").clone("tile-unexplored-surface")},t.unexplored.base.setEnabled(!1),t.unexplored.surface.setEnabled(!1),t.unexplored.base.visibility=t.unexplored.surface.visibility=.4,t.unexplored.base.material=t.unexplored.surface.material=this.materialManager.get("unexplored"),this.world.tiles.forEach(function(n){var o,s,r="tile-"+n.hexagon.toString();n.isExplored?(t[n.type]?(o=t[n.type].base.clone(r+"-base"),s=t[n.type].surface.clone(r+"-surface")):(o=e.game.assetsManager.get("mesh-hex-bottom").clone(r+"-base"),s=e.game.assetsManager.get("mesh-"+n.surface).clone(r+"-surface"),o.material=s.material=e.materialManager.get(n.type),s.receiveShadows=!0,e.meshes.push(o),t[n.type]={base:o,surface:s}),e.createEnvironment(n),n.isVisible?(e.createStructure(n),e.createUnit(n)):(e.sunLight.excludedMeshes.push(o),e.sunLight.excludedMeshes.push(s))):(o=t.unexplored.base.clone(r+"-base"),s=t.unexplored.surface.clone(r+"-surface")),o.position=e.game.settings.world.layout.hexagonToPixel(n.hexagon,0),s.position=e.game.settings.world.layout.hexagonToPixel(n.hexagon,.093),o.scaling=s.scaling=new i.Vector3(.8,.8,.8),o.rotation=s.rotation=new i.Vector3(0,Math.PI/2,0)},this)},e.prototype.createEnvironment=function(e){for(var t,n,i,o={},s=0;s<e.environment.length;++s){var r=e.environment[s],a="tile-"+e.hexagon.toString()+"-"+r.id+"-"+s;o[r.model]?i=o[r.model].createInstance(a):(t=this.game.assetsManager.get("mesh-"+r.model),i=t.clone(a),i.makeGeometryUnique(),i.subMeshes=t.subMeshes,n=i.getBoundingInfo().boundingBox,e.isVisible||this.sunLight.excludedMeshes.push(i),o[r.model]=i),i.position=r.position,i.position.y=.1,this.meshes.push(i)}},e.prototype.createStructure=function(e){if(e.structure){var t=this.game.assetsManager.get("mesh-"+e.structure.model),n=(t.getBoundingInfo().boundingBox,t.createInstance("tile-"+e.hexagon.toString()+"-"+e.structure.id));n.scaling=new i.Vector3(.9,.9,.9),n.rotation=new i.Vector3(0,o["default"].toRadians(125),0),n.position=e.structure.position,n.position.y=.1,this.meshes.push(n)}},e.prototype.createUnit=function(e){if(e.unit){var t=this.game.assetsManager.get("mesh-"+e.unit.model),n=(t.getBoundingInfo().boundingBox,t.createInstance("tile-"+e.hexagon.toString()+"-"+e.unit.id));n.scaling=new i.Vector3(.9,.9,.9),n.rotation=new i.Vector3(0,o["default"].toRadians(125),0),n.position=e.unit.position,n.position.y=.1,this.meshes.push(n)}},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t,n){"use strict";var i=n(1),o=function(){function e(t){this.scene=t,this.cameras=new Map,this.add("main",e.CAMERA.ARC_ROTATE,{alpha:e.toRadians(360),beta:e.toRadians(40),radius:5,position:i.Vector3.Zero(),settings:{lowerRadiusLimit:3,upperRadiusLimit:100,lowerBetaLimit:e.toRadians(30),panningAxis:new i.Vector3(1,0,1),inertia:.5}})}return e.prototype.add=function(t,n,o){var s;switch(n){case e.CAMERA.ARC_ROTATE:s=new i.ArcRotateCamera(t,o.alpha,o.beta,o.radius,o.position,this.scene);break;case e.CAMERA.UNIVERSAL:}for(var r in o.settings)o.settings.hasOwnProperty(r)&&(s[r]=o.settings[r]);return this.cameras.set(t,s),s},e.prototype.get=function(e){return this.cameras.get(e)},e.toRadians=function(e){return e*Math.PI/180},e.toDegrees=function(e){return 180*e/Math.PI},e.CAMERA={UNIVERSAL:1,ARC_ROTATE:2,FREE:3,FOLLOW:4,TOUCH:5,GAMEPAD:6,DEVICE_ORIENTATION:7,VIRTUAL_JOYSTICK:8,ANAGLYPH:9,VR_DEVICE_ORIENTATION:10,WEB_VR_FREE:11},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=n(1),o=function(){function e(t){this.scene=t,this.lights=new Map,this.add("sunLight",e.LIGHT.DIRECTIONAL,new i.Vector3((-2),(-8),4),null,{intensity:.7}),this.add("ambientLight",e.LIGHT.HEMISPHERIC,new i.Vector3(0,1,0),null,{intensity:.6,diffuse:new i.Color3(1,1,1),specular:new i.Color3(1,1,1),groundColor:new i.Color3(0,0,0)})}return e.prototype.add=function(t,n,o,s,r){var a;switch(n){case e.LIGHT.DIRECTIONAL:a=new i.DirectionalLight(t,o,this.scene);break;case e.LIGHT.SPOT:a=new i.SpotLight(t,o,s,.8,2,this.scene);break;case e.LIGHT.HEMISPHERIC:a=new i.HemisphericLight(t,o,this.scene)}s&&(a.position=s);for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u]);return this.lights.set(t,a),a},e.prototype.get=function(e){return this.lights.get(e)},e.LIGHT={POINT:1,DIRECTIONAL:2,SPOT:3,HEMISPHERIC:4},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=n(1),o=function(){function e(e,t){this.scene=e,this.assetsManager=t,this.materials=new Map,this.add("paper","paper",[-50,-50]);var n=this.add("unexplored","");n.diffuseColor=new i.Color3(1,1,1);var o=(this.add("arctic","snow",[-1,-1]),this.add("barren","dirt",[-1,-1]),this.add("desert","sand",[-1,-1]),this.add("forest","grass",[-1,-1]));o.diffuseColor=new i.Color3(.5,.5,.5);var s=this.add("glacier","ice",[-1,-1]);s.specularColor=new i.Color3(.5,.5,.5),s.specularPower=100,s.alpha=.9;var r=(this.add("mountain","stone",[-1,-1]),this.add("ocean","water",[-1,-1]));r.specularColor=new i.Color3(.3,.3,.3),r.specularPower=100,r.alpha=.9;this.add("plain","grass",[-1,-1])}return e.prototype.add=function(e,t,n,o){var s=new i.StandardMaterial(e,this.scene);return s.diffuseTexture=this.assetsManager.get("texture-"+t+"-diffuse"),s.diffuseTexture&&("undefined"!=typeof n&&(s.diffuseTexture.uScale=n[0],s.diffuseTexture.vScale=n[1]),"undefined"!=typeof o&&(s.diffuseTexture.uOffset=o[0],s.diffuseTexture.vOffset=o[1])),s.bumpTexture=this.assetsManager.get("texture-"+t+"-bump"),s.bumpTexture&&("undefined"!=typeof n&&(s.bumpTexture.uScale=n[0],s.bumpTexture.vScale=n[1]),"undefined"!=typeof o&&(s.bumpTexture.uOffset=o[0],s.bumpTexture.vOffset=o[1])),s.specularColor=new i.Color3(0,0,0),s.specularPower=0,this.materials.set(e,s),s},e.prototype.get=function(e){return this.materials.get(e)},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o},function(e,t,n){"use strict";var i=n(1),o=n(37),s=function(){function e(e,t){var n=this;this.renderingCanvas=e,this.backgroundColor=t,this.resizeToCanvas=function(){var e=n.renderingCanvas.getBoundingClientRect();n.loadingScreen.style.left=e.left+"px",n.loadingScreen.style.top=e.top+"px",n.loadingScreen.style.width=e.width+"px",n.loadingScreen.style.height=e.height+"px"}}return e.prototype.displayLoadingUI=function(){var e=this;this.loadingScreen||(this.template=o({text:this.loadingText||"Loading all the gooey goodness...",backgroundColor:this.backgroundColor.toHexString(),textColor:.33*this.backgroundColor.r+.5*this.backgroundColor.g+.16*this.backgroundColor.b>=.5?"black":"white"}),this.loadingScreen=document.createElement("div"),this.loadingScreen.id="loading-screen",this.loadingScreen.innerHTML=this.template,this.resizeToCanvas(),window.addEventListener("resize",this.resizeToCanvas),document.body.appendChild(this.loadingScreen),setTimeout(function(){e.loadingScreen.style.opacity="1"},0))},e.prototype.hideLoadingUI=function(){var e=this;if(this.loadingScreen){var t=function(){e.loadingScreen&&(document.body.removeChild(e.loadingScreen),window.removeEventListener("resize",e.resizeToCanvas),e.loadingScreen=null)};this.loadingScreen.style.opacity="0",this.loadingScreen.addEventListener("transitionend",t)}},Object.defineProperty(e.prototype,"loadingUIText",{set:function(e){this.loadingText=e,document.querySelector(".loading figcaption").innerHTML=this.loadingText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadingUIBackgroundColor",{get:function(){return this.backgroundColor.toHexString()},set:function(e){this.backgroundColor=i.Color3.FromHexString(e)},enumerable:!0,configurable:!0}),e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){function i(e){var t,i="",s=e||{};return function(e,s,r){i=i+"<style>#loading-screen {\n\tposition: absolute;\n\tcolor: "+o.escape(null==(t=r)?"":t)+";\n\tbackground-color: "+o.escape(null==(t=e)?"":t)+";\n\ttext-align: center;\n\topacity: 0;\n\ttransition: opacity 1.5s ease;\n}\nsvg polygon, svg path {\n\tfill: "+o.escape(null==(t=r)?"":t)+';\n}\n.loading {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin: 0;\n\ttransform: translate(-50%, -50%);\n}\n.loading svg {\n\twidth: 96px;\n}\n.loading figcaption {\n\tmargin-top: 2em;\n}\n.copy {\n\tposition: absolute;\n\tbottom: 0;\n\tpadding: 10%;\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n.copy svg {\n\theight: 1em;\n}\n.copy i {\n\tfont-style: normal;\n\tfont-size: 1.5em;\n}\n</style><figure class="loading"><div>'+(null==(t=n(40))?"":t)+"</div><figcaption>"+o.escape(null==(t=s)?"":t)+'</figcaption></figure><footer class="copy">Project-Hex is powered by BabylonJS <span>'+(null==(t=n(41))?"":t)+"</span> and built with <i>&hearts;</i></footer>"}.call(this,"backgroundColor"in s?s.backgroundColor:"undefined"!=typeof backgroundColor?backgroundColor:void 0,"text"in s?s.text:"undefined"!=typeof text?text:void 0,"textColor"in s?s.textColor:"undefined"!=typeof textColor?textColor:void 0),i}var o=n(38);e.exports=i},function(e,t,n){"use strict";function i(e,t){if(1===arguments.length){for(var n=e[0],o=1;o<e.length;o++)n=i(n,e[o]);return n}for(var s in t)if("class"===s){var r=e[s]||[];e[s]=(Array.isArray(r)?r:[r]).concat(t[s]||[])}else if("style"===s){var r=a(e[s]),u=a(t[s]);e[s]=r+(r&&u&&";")+u}else e[s]=t[s];return e}function o(e,t){for(var n,i="",o="",s=Array.isArray(t),a=0;a<e.length;a++)n=r(e[a]),n&&(s&&t[a]&&(n=l(n)),i=i+o+n,o=" ");return i}function s(e){var t="",n="";for(var i in e)i&&e[i]&&d.call(e,i)&&(t=t+n+i,n=" ");return t}function r(e,t){return Array.isArray(e)?o(e,t):e&&"object"==typeof e?s(e):e||""}function a(e){if(!e)return"";if("object"==typeof e){var t="",n="";for(var i in e)d.call(e,i)&&(t=t+n+i+":"+e[i],n=";");return t}return e=""+e,";"===e[e.length-1]?e.slice(0,-1):e}function u(e,t,n,i){return t!==!1&&null!=t&&(t||"class"!==e&&"style"!==e)?t===!0?" "+(i?e:e+'="'+e+'"'):("function"==typeof t.toJSON&&(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||t.indexOf('"')===-1)?(n&&(t=l(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"):""}function c(e,t){var n="";for(var i in e)if(d.call(e,i)){var o=e[i];if("class"===i){o=r(o),n=u(i,o,!1,t)+n;continue}"style"===i&&(o=a(o)),n+=u(i,o,!1,t)}return n}function l(e){var t=""+e,n=f.exec(t);if(!n)return e;var i,o,s,r="";for(i=n.index,o=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}o!==i&&(r+=t.substring(o,i)),o=i+1,r+=s}return o!==i?r+t.substring(o,i):r}function h(e,t,i,o){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||o))throw e.message+=" on line "+i,e;try{o=o||n(39).readFileSync(t,"utf8")}catch(s){h(e,null,i)}var r=3,a=o.split("\n"),u=Math.max(i-r,0),c=Math.min(a.length,i+r),r=a.slice(u,c).map(function(e,t){var n=t+u+1;return(n==i?"  > ":"    ")+n+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Pug")+":"+i+"\n"+r+"\n\n"+e.message,e}var d=Object.prototype.hasOwnProperty;t.merge=i,t.classes=r,t.style=a,t.attr=u,t.attrs=c;var f=/["&<>]/;t.escape=l,t.rethrow=h},function(e,t){},function(e,t){e.exports='<?xml version="1.0" encoding="utf-8"?>\n<svg id="SVG-Circus-328e0535-70be-f58b-9817-148f0bd26ef0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" \npreserveAspectRatio="xMidYMid meet">\n\t<style>\n\t\t@keyframes fade {\n\t\t  10% { opacity: 1; }\n\t\t  50% { opacity: 1; }\n\t\t  80% { opacity: 0; }\n\t\t}\n\t\tpolygon { opacity: 0; animation: fade 3000ms ease-in-out infinite }\n\t\t#actor_1 { animation-delay: 100ms }\n\t\t#actor_3 { animation-delay: 200ms }\n\t\t#actor_2 { animation-delay: 300ms }\n\t\t#actor_4 { animation-delay: 400ms }\n\t\t#actor_6 { animation-delay: 500ms }\n\t\t#actor_5 { animation-delay: 600ms }\n\t\t#actor_7 { animation-delay: 700ms }\n\t</style>\n\t<polygon id="actor_1" points="35.00,8.00 21.14,16.00 21.14,32.00 35.00,40.00 48.86,32.00 48.86,16.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_2" points="65.00,8.00 51.14,16.00 51.14,32.00 65.00,40.00 78.86,32.00 78.86,16.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_3" points="20.00,34.00 6.14,42.00 6.14,58.00 20.00,66.00 33.86,58.00 33.86,42.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_4" points="50.00,34.00 36.14,42.00 36.14,58.00 50.00,66.00 63.86,58.00 63.86,42.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_5" points="80.00,34.00 66.14,42.00 66.14,58.00 80.00,66.00 93.86,58.00 93.86,42.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_6" points="35.00,60.00 21.14,68.00 21.14,84.00 35.00,92.00 48.86,84.00 48.86,68.00" fill="rgba(255,255,255,1)"></polygon>\n\t<polygon id="actor_7" points="65.00,60.00 51.14,68.00 51.14,84.00 65.00,92.00 78.86,84.00 78.86,68.00" fill="rgba(255,255,255,1)"></polygon>\n</svg>'},function(e,t){e.exports='<?xml version="1.0" encoding="utf-8"?>\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 44.347 44.347" style="enable-background:new 0 0 44.347 44.347;" xml:space="preserve">\n<path class="st0" d="M22.188,0C9.786-0.011,0.025,9.792,0,22.282c-0.025,12.382,9.553,22.035,21.893,22.065\n\tc12.51,0.031,22.412-9.678,22.454-22.018C44.389,10.056,34.421,0.011,22.188,0z M22.078,40.018\n\tc-9.787-0.064-17.738-8.033-17.749-17.786c-0.01-9.567,8.063-17.849,17.398-17.849c10.001,0,18.155,8.038,18.143,17.884\n\tC39.858,32.066,31.823,40.082,22.078,40.018z"/>\n<path class="st0" d="M21.196,6.083c-1.654,2.357-2.497,4.469-0.884,6.821c1.166,1.702,2.788,2.478,4.823,2.073\n\tc2.649-0.527,3.82-2.455,4.303-4.986c2.487,3.938,2.258,7.871-0.584,10.98c-2.739,2.995-6.799,3.766-10.547,2.003\n\tc-3.228-1.519-5.648-5.485-5.301-8.689C13.461,10.071,16.556,6.805,21.196,6.083z"/>\n</svg>\n'}]);